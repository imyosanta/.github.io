<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshGuard - 购物清单</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981',
                        secondary: '#059669',
                        accent: '#F59E0B',
                        success: '#34D399',
                        warning: '#FBBF24',
                        danger: '#EF4444',
                        light: 'rgba(255, 255, 255, 0.7)',
                        dark: 'rgba(15, 23, 42, 0.8)'
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #ffffff 0%, #f8fffe 25%, #f0fdf4 50%, #ecfdf5 75%, #ffffff 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.15);
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }
        
        .glass-card-active {
            background: rgba(16, 185, 129, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-card-warning {
            background: rgba(245, 158, 11, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-card-danger {
            background: rgba(239, 68, 68, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        /* iOS状态栏样式 */
        .ios-status-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        /* 自定义滚动条 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        /* iOS状态栏样式 */
        .ios-status-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(16, 185, 129, 0.5);
            border-radius: 10px;
        }
        
        /* 购物清单样式 */
        .shopping-list-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .shopping-list-item:last-child {
            border-bottom: none;
        }
        
        /* 语音输入动画 */
        .voice-wave {
            animation: voice-wave 1.5s infinite ease-in-out;
        }
        
        @keyframes voice-wave {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }
    </style>
</head>
<body class="text-gray-800 min-h-screen">
    <!-- 合并的顶部组件 -->
    <div id="app-container" class="pb-16 min-h-screen">
        <!-- 合并的状态栏和导航栏 -->
        <header id="top-header" class="glass fixed top-0 left-0 right-0 z-50 px-4 py-3">
            <!-- iOS状态栏区域 -->
            <div id="ios-status-bar" class="h-7 flex justify-between items-center px-4">
                <div id="time" class="text-xs font-semibold text-gray-800">9:41</div>
                <div id="status-icons" class="flex items-center space-x-1">
                    <i class="fas fa-signal text-xs text-gray-800"></i>
                    <i class="fas fa-wifi text-xs text-gray-800"></i>
                    <i class="fas fa-battery-three-quarters text-xs text-gray-800"></i>
                </div>
            </div>
            <!-- 导航栏区域 -->
            <div id="top-nav" class="py-3 flex justify-between items-center">
                <div id="page-title" class="flex items-center">
                    <a href="P-CUS_PRODUCT_OVERVIEW.html" id="back-button" class="mr-2">
                        <i class="fas fa-chevron-left text-gray-800"></i>
                    </a>
                    <h1 class="text-lg font-semibold text-gray-800">购物清单</h1>
                </div>
                <div id="header-actions" class="flex items-center space-x-3">
                    <button id="new-list-btn" class="p-2 rounded-full glass">
                        <i class="fas fa-plus text-primary"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- 主内容区 -->
        <main id="main-content" class="pt-32 px-4 pb-4 overflow-y-auto custom-scrollbar">
            <!-- 当前清单区域 -->
            <section id="current-list-section" class="mb-6">
                <div class="flex justify-between items-center mb-3">
                    <h2 id="current-list-title" class="text-lg font-bold text-gray-800">当前清单</h2>
                    <div class="flex space-x-2">
                        <button id="edit-list-name-btn" class="text-xs text-gray-600 flex items-center">
                            <i class="fas fa-edit mr-1"></i>编辑名称
                        </button>
                    </div>
                </div>
                
                <div id="current-list-card" class="glass-card p-4 rounded-2xl mb-4">
                    <div id="list-header" class="flex justify-between items-center mb-3">
                        <div>
                            <h3 id="list-name" class="text-base font-semibold text-gray-800">周末采购清单</h3>
                            <p id="list-date" class="text-xs text-gray-600">创建于 2023-06-15</p>
                        </div>
                        <div id="list-stats" class="text-xs bg-primary/20 text-primary px-2 py-1 rounded-full">
                            已添加 5 件商品
                        </div>
                    </div>
                    
                    <div id="list-items" class="space-y-3">
                        <!-- 商品项 1 -->
                        <div id="list-item-1" class="shopping-list-item flex items-center justify-between py-2">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                                    <img src="https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6" alt="红富士苹果" data-category="食物">
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-800">红富士苹果</h4>
                                    <p class="text-xs text-gray-600">水果区 · 新鲜</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button id="decrease-item-1" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-minus text-xs text-gray-600"></i>
                                </button>
                                <span id="item-1-quantity" class="mx-2 text-sm">2</span>
                                <button id="increase-item-1" class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i class="fas fa-plus text-xs text-primary"></i>
                                </button>
                                <button id="remove-item-1" class="ml-3 text-gray-400">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 商品项 2 -->
                        <div id="list-item-2" class="shopping-list-item flex items-center justify-between py-2">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                                    <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b" alt="有机纯牛奶" data-category="食物">
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-800">有机纯牛奶</h4>
                                    <p class="text-xs text-gray-600">乳制品区 · 新鲜</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button id="decrease-item-2" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-minus text-xs text-gray-600"></i>
                                </button>
                                <span id="item-2-quantity" class="mx-2 text-sm">1</span>
                                <button id="increase-item-2" class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i class="fas fa-plus text-xs text-primary"></i>
                                </button>
                                <button id="remove-item-2" class="ml-3 text-gray-400">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 商品项 3 -->
                        <div id="list-item-3" class="shopping-list-item flex items-center justify-between py-2">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                                    <img src="https://i.pinimg.com/736x/dc/31/cc/dc31cce683e8266ae91f0d9e033f5f78.jpg" alt="全麦面包" data-category="食物">
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-800">全麦面包</h4>
                                    <p class="text-xs text-gray-600">烘焙区 · 新鲜</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button id="decrease-item-3" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-minus text-xs text-gray-600"></i>
                                </button>
                                <span id="item-3-quantity" class="mx-2 text-sm">1</span>
                                <button id="increase-item-3" class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i class="fas fa-plus text-xs text-primary"></i>
                                </button>
                                <button id="remove-item-3" class="ml-3 text-gray-400">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 商品项 4 -->
                        <div id="list-item-4" class="shopping-list-item flex items-center justify-between py-2">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                                    <img src="https://i.pinimg.com/736x/5d/8c/44/5d8c44920a45da876871fccbcd1a5e01.jpg" alt="新鲜西红柿" data-category="食物">
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-800">新鲜西红柿</h4>
                                    <p class="text-xs text-gray-600">蔬菜区 · 新鲜</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button id="decrease-item-4" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-minus text-xs text-gray-600"></i>
                                </button>
                                <span id="item-4-quantity" class="mx-2 text-sm">3</span>
                                <button id="increase-item-4" class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i class="fas fa-plus text-xs text-primary"></i>
                                </button>
                                <button id="remove-item-4" class="ml-3 text-gray-400">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 商品项 5 -->
                        <div id="list-item-5" class="shopping-list-item flex items-center justify-between py-2">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                                    <img src="https://images.unsplash.com/photo-1518569656558-1f25e69d93d7" alt="散养土鸡蛋" data-category="食物">
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-800">散养土鸡蛋</h4>
                                    <p class="text-xs text-gray-600">蛋品区 · 新鲜</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button id="decrease-item-5" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-minus text-xs text-gray-600"></i>
                                </button>
                                <span id="item-5-quantity" class="mx-2 text-sm">1</span>
                                <button id="increase-item-5" class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center">
                                    <i class="fas fa-plus text-xs text-primary"></i>
                                </button>
                                <button id="remove-item-5" class="ml-3 text-gray-400">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 添加商品按钮 -->
                    <div id="add-item-section" class="mt-4">
                        <button id="add-item-btn" class="w-full py-2 rounded-xl border border-dashed border-primary/50 text-primary flex items-center justify-center">
                            <i class="fas fa-plus mr-2"></i>添加商品
                        </button>
                    </div>
                </div>
                
                <!-- 添加方式按钮组 -->
                <div id="add-methods" class="grid grid-cols-3 gap-3 mb-6">
                    <button id="history-add-btn" class="glass-card p-3 flex flex-col items-center justify-center">
                        <div class="w-10 h-10 rounded-full bg-accent/20 flex items-center justify-center mb-1">
                            <i class="fas fa-history text-accent"></i>
                        </div>
                        <span class="text-xs text-gray-700">历史购买</span>
                    </button>
                    
                    <button id="voice-add-btn" class="glass-card p-3 flex flex-col items-center justify-center">
                        <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center mb-1">
                            <i class="fas fa-microphone text-primary"></i>
                        </div>
                        <span class="text-xs text-gray-700">语音添加</span>
                    </button>
                    
                    <button id="scan-add-btn" class="glass-card p-3 flex flex-col items-center justify-center">
                        <div class="w-10 h-10 rounded-full bg-secondary/20 flex items-center justify-center mb-1">
                            <i class="fas fa-barcode text-secondary"></i>
                        </div>
                        <span class="text-xs text-gray-700">扫码添加</span>
                    </button>
                </div>
            </section>
            
            <!-- 历史清单区域 -->
            <section id="history-lists-section">
                <div class="flex justify-between items-center mb-3">
                    <h2 id="history-lists-title" class="text-lg font-bold text-gray-800">历史清单</h2>
                </div>
                
                <div id="history-lists" class="space-y-3">
                    <!-- 历史清单 1 -->
                    <div id="history-list-1" class="glass-card p-4 rounded-2xl">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="text-base font-semibold text-gray-800">日常必备</h3>
                                <p class="text-xs text-gray-600">创建于 2023-06-10 · 8件商品</p>
                            </div>
                            <button id="load-list-1" class="text-xs bg-primary/20 text-primary px-3 py-1.5 rounded-full">
                                加载
                            </button>
                        </div>
                    </div>
                    
                    <!-- 历史清单 2 -->
                    <div id="history-list-2" class="glass-card p-4 rounded-2xl">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="text-base font-semibold text-gray-800">家庭聚餐</h3>
                                <p class="text-xs text-gray-600">创建于 2023-06-05 · 12件商品</p>
                            </div>
                            <button id="load-list-2" class="text-xs bg-primary/20 text-primary px-3 py-1.5 rounded-full">
                                加载
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部操作栏 -->
        <div id="bottom-action-bar" class="px-4 pb-20">
            <button id="generate-route-btn" class="w-full py-3 rounded-full bg-primary text-white font-medium shadow-lg flex items-center justify-center">
                <i class="fas fa-route mr-2"></i>生成购物路线
            </button>
        </div>

        <!-- 底部导航栏 -->
        <nav id="bottom-nav" class="fixed bottom-4 left-4 right-4 z-40">
            <div class="glass rounded-full shadow-glass px-0.5 py-0.5 flex justify-center items-center max-w-[280px] mx-auto space-x-1">
                <a id="nav-overview" href="P-CUS_PRODUCT_OVERVIEW.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-home text-gray-800 text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-shopping-list" href="P-CUS_SHOPPING_LIST.html" class="flex items-center justify-center p-3">
                    <div class="w-12 h-12 rounded-xl bg-primary/30 flex items-center justify-center">
                        <i class="fas fa-shopping-cart text-primary text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-discount" href="P-CUS_DISCOUNT.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-tag text-gray-800 text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-user" href="P-CUS_USER_CENTER.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-user text-gray-800 text-lg"></i>
                    </div>
                </a>
            </div>
        </nav>
    </div>
    
    <!-- 语音输入模态框 -->
    <div id="voice-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
        <div class="glass-card w-4/5 p-6 rounded-3xl">
            <div class="text-center mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">语音添加商品</h3>
                <p class="text-sm text-gray-600">请说出您想添加的商品</p>
            </div>
            
            <div class="flex justify-center mb-6">
                <div id="voice-animation" class="w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center">
                    <div class="w-16 h-16 rounded-full bg-primary/30 flex items-center justify-center voice-wave">
                        <i class="fas fa-microphone text-2xl text-primary"></i>
                    </div>
                </div>
            </div>
            
            <div id="voice-result" class="text-center mb-6">
                <p class="text-sm text-gray-800">正在聆听...</p>
            </div>
            
            <div class="flex justify-center">
                <button id="voice-cancel-btn" class="px-6 py-2 rounded-full bg-gray-200 text-gray-700 mr-3">
                    取消
                </button>
                <button id="voice-confirm-btn" class="px-6 py-2 rounded-full bg-primary text-white">
                    完成
                </button>
            </div>
        </div>
    </div>
    
    <!-- 新建清单模态框 -->
    <div id="new-list-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
        <div class="glass-card w-4/5 p-6 rounded-3xl">
            <div class="text-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">新建购物清单</h3>
            </div>
            
            <div class="mb-4">
                <label for="new-list-name" class="block text-sm text-gray-700 mb-1">清单名称</label>
                <input type="text" id="new-list-name" class="w-full px-4 py-2 rounded-xl bg-white/50 border border-gray-200 focus:outline-none focus:border-primary" placeholder="输入清单名称">
            </div>
            
            <div class="flex justify-center">
                <button id="new-list-cancel-btn" class="px-6 py-2 rounded-full bg-gray-200 text-gray-700 mr-3">
                    取消
                </button>
                <button id="new-list-confirm-btn" class="px-6 py-2 rounded-full bg-primary text-white">
                    创建
                </button>
            </div>
        </div>
    </div>
    
    <!-- 编辑清单名称模态框 -->
    <div id="edit-name-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
        <div class="glass-card w-4/5 p-6 rounded-3xl">
            <div class="text-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">编辑清单名称</h3>
            </div>
            
            <div class="mb-4">
                <label for="edit-list-name" class="block text-sm text-gray-700 mb-1">清单名称</label>
                <input type="text" id="edit-list-name" class="w-full px-4 py-2 rounded-xl bg-white/50 border border-gray-200 focus:outline-none focus:border-primary" value="周末采购清单">
            </div>
            
            <div class="flex justify-center">
                <button id="edit-name-cancel-btn" class="px-6 py-2 rounded-full bg-gray-200 text-gray-700 mr-3">
                    取消
                </button>
                <button id="edit-name-confirm-btn" class="px-6 py-2 rounded-full bg-primary text-white">
                    保存
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取当前时间并显示在状态栏
            const updateTime = () => {
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                document.querySelector('#time').textContent = `${hours}:${minutes}`;
            };
            updateTime();
            setInterval(updateTime, 60000);
            
            // 返回按钮点击事件
            document.querySelector('#back-button').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-CUS_PRODUCT_OVERVIEW.html';
            });
            
            // 底部导航栏点击事件
            document.querySelector('#nav-overview').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-CUS_PRODUCT_OVERVIEW.html';
            });
            
            document.querySelector('#nav-shopping-list').addEventListener('click', function(e) {
                e.preventDefault();
                // 已在购物清单页面，无需操作
            });
            
            document.querySelector('#nav-discount').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-CUS_DISCOUNT.html';
            });
            
            document.querySelector('#nav-user').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-CUS_USER_CENTER.html';
            });
            
            // 新建清单按钮点击事件
            document.querySelector('#new-list-btn').addEventListener('click', function() {
                document.querySelector('#new-list-modal').classList.remove('hidden');
            });
            
            // 新建清单模态框按钮事件
            document.querySelector('#new-list-cancel-btn').addEventListener('click', function() {
                document.querySelector('#new-list-modal').classList.add('hidden');
            });
            
            document.querySelector('#new-list-confirm-btn').addEventListener('click', function() {
                const listName = document.querySelector('#new-list-name').value.trim();
                if (listName) {
                    // 在实际应用中，这里会创建新的购物清单
                    document.querySelector('#list-name').textContent = listName;
                    
                    // 更新创建日期为今天
                    const today = new Date();
                    const formattedDate = today.toISOString().split('T')[0];
                    document.querySelector('#list-date').textContent = `创建于 ${formattedDate}`;
                    
                    // 清空清单内容
                    document.querySelector('#list-items').innerHTML = '';
                    document.querySelector('#list-stats').textContent = '已添加 0 件商品';
                }
                document.querySelector('#new-list-modal').classList.add('hidden');
            });
            
            // 编辑清单名称按钮点击事件
            document.querySelector('#edit-list-name-btn').addEventListener('click', function() {
                const currentName = document.querySelector('#list-name').textContent;
                document.querySelector('#edit-list-name').value = currentName;
                document.querySelector('#edit-name-modal').classList.remove('hidden');
            });
            
            // 编辑清单名称模态框按钮事件
            document.querySelector('#edit-name-cancel-btn').addEventListener('click', function() {
                document.querySelector('#edit-name-modal').classList.add('hidden');
            });
            
            document.querySelector('#edit-name-confirm-btn').addEventListener('click', function() {
                const listName = document.querySelector('#edit-list-name').value.trim();
                if (listName) {
                    document.querySelector('#list-name').textContent = listName;
                }
                document.querySelector('#edit-name-modal').classList.add('hidden');
            });
            
            // 添加商品按钮点击事件
            document.querySelector('#add-item-btn').addEventListener('click', function() {
                // 在实际应用中，这里会跳转到商品列表页面进行选择
                window.location.href = 'P-CUS_PRODUCT_DETAIL.html';
            });
            
            // 历史购买添加按钮点击事件
            document.querySelector('#history-add-btn').addEventListener('click', function() {
                window.location.href = 'P-CUS_PURCHASE_HISTORY.html';
            });
            
            // 语音添加按钮点击事件
            document.querySelector('#voice-add-btn').addEventListener('click', function() {
                document.querySelector('#voice-modal').classList.remove('hidden');
                document.querySelector('#voice-result').innerHTML = '<p class="text-sm text-gray-800">正在聆听...</p>';
                
                // 模拟语音识别过程
                setTimeout(() => {
                    document.querySelector('#voice-result').innerHTML = '<p class="text-sm text-gray-800">我想要买<span class="text-primary font-medium">西兰花、胡萝卜和牛肉</span></p>';
                }, 2000);
            });
            
            // 语音模态框按钮事件
            document.querySelector('#voice-cancel-btn').addEventListener('click', function() {
                document.querySelector('#voice-modal').classList.add('hidden');
            });
            
            document.querySelector('#voice-confirm-btn').addEventListener('click', function() {
                // 在实际应用中，这里会处理语音识别结果并添加到购物清单
                document.querySelector('#voice-modal').classList.add('hidden');
                
                // 模拟添加语音识别的商品
                const listItems = document.querySelector('#list-items');
                const itemCount = listItems.children.length;
                
                // 更新商品数量统计
                document.querySelector('#list-stats').textContent = `已添加 ${itemCount + 3} 件商品`;
            });
            
            // 扫码添加按钮点击事件
            document.querySelector('#scan-add-btn').addEventListener('click', function() {
                // 在实际应用中，这里会调用相机API进行扫码
                console.log('需要调用第三方接口实现相机扫码功能');
                // 扫码后通常会跳转到商品详情页
                window.location.href = 'P-CUS_SCAN.html';
            });
            
            // 生成购物路线按钮点击事件
            document.querySelector('#generate-route-btn').addEventListener('click', function() {
                // 检查购物清单是否为空
                const listItems = document.querySelector('#list-items').children;
                if (listItems.length > 0) {
                    // 跳转到店内导航页面
                    window.location.href = 'P-CUS_NAVIGATION.html?shopping_list_id=current';
                } else {
                    alert('购物清单为空，请先添加商品');
                }
            });
            
            // 历史清单加载按钮点击事件
            document.querySelector('#load-list-1').addEventListener('click', function() {
                // 在实际应用中，这里会加载历史清单数据
                document.querySelector('#list-name').textContent = '日常必备';
                document.querySelector('#list-date').textContent = '创建于 2023-06-10';
                document.querySelector('#list-stats').textContent = '已添加 8 件商品';
                
                // 模拟加载成功提示
                alert('历史清单"日常必备"已加载');
            });
            
            document.querySelector('#load-list-2').addEventListener('click', function() {
                // 在实际应用中，这里会加载历史清单数据
                document.querySelector('#list-name').textContent = '家庭聚餐';
                document.querySelector('#list-date').textContent = '创建于 2023-06-05';
                document.querySelector('#list-stats').textContent = '已添加 12 件商品';
                
                // 模拟加载成功提示
                alert('历史清单"家庭聚餐"已加载');
            });
            
            // 商品数量增减按钮事件
            // 为每个商品项添加事件监听
            for (let i = 1; i <= 5; i++) {
                // 减少数量按钮
                document.querySelector(`#decrease-item-${i}`).addEventListener('click', function() {
                    const quantityElement = document.querySelector(`#item-${i}-quantity`);
                    let quantity = parseInt(quantityElement.textContent);
                    if (quantity > 1) {
                        quantity--;
                        quantityElement.textContent = quantity;
                    }
                });
                
                // 增加数量按钮
                document.querySelector(`#increase-item-${i}`).addEventListener('click', function() {
                    const quantityElement = document.querySelector(`#item-${i}-quantity`);
                    let quantity = parseInt(quantityElement.textContent);
                    quantity++;
                    quantityElement.textContent = quantity;
                });
                
                // 删除商品按钮
                document.querySelector(`#remove-item-${i}`).addEventListener('click', function() {
                    const listItem = document.querySelector(`#list-item-${i}`);
                    listItem.remove();
                    
                    // 更新商品数量统计
                    const remainingItems = document.querySelector('#list-items').children.length;
                    document.querySelector('#list-stats').textContent = `已添加 ${remainingItems} 件商品`;
                });
            }
            
            // 商品项点击事件 - 跳转到商品详情
            const listItems = document.querySelectorAll('.shopping-list-item');
            listItems.forEach((item, index) => {
                const itemId = index + 1;
                item.addEventListener('click', function(e) {
                    // 如果点击的是按钮，不进行跳转
                    if (e.target.closest('button')) {
                        return;
                    }
                    
                    // 跳转到商品详情页
                    window.location.href = `P-CUS_PRODUCT_DETAIL.html?product_id=prod${itemId}`;
                });
            });
        });
    </script>
</body>
</html>