<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshGuard - 商品列表</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981',
                        secondary: '#059669',
                        accent: '#F59E0B',
                        success: '#34D399',
                        warning: '#FBBF24',
                        danger: '#EF4444',
                        light: 'rgba(255, 255, 255, 0.7)',
                        dark: 'rgba(15, 23, 42, 0.8)'
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #ffffff 0%, #f8fffe 25%, #f0fdf4 50%, #ecfdf5 75%, #ffffff 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.15);
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }
        
        .glass-card-active {
            background: rgba(16, 185, 129, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-card-warning {
            background: rgba(245, 158, 11, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-card-danger {
            background: rgba(239, 68, 68, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        /* iOS状态栏样式 */
        .ios-status-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        /* 自定义滚动条 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(16, 185, 129, 0.5);
            border-radius: 10px;
        }
        
        /* 隐藏筛选器滚动条 */
        #filter-scroll::-webkit-scrollbar {
            display: none;
        }
        
        /* 筛选器样式 */
        .filter-chip {
            transition: all 0.3s ease;
        }
        
        .filter-chip.active {
            background-color: rgba(16, 185, 129, 0.2);
            color: #10B981;
            border-color: #10B981;
        }
        
        /* 批量操作模式样式 */
        .batch-mode .product-card {
            border: 1px dashed #10B981;
        }
        
        .product-card.selected {
            border: 2px solid #10B981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        /* 状态标签样式 */
        .status-fresh {
            background-color: rgba(52, 211, 153, 0.2);
            color: #10B981;
        }
        
        .status-expiring {
            background-color: rgba(245, 158, 11, 0.2);
            color: #F59E0B;
        }
        
        .status-expired {
            background-color: rgba(239, 68, 68, 0.2);
            color: #EF4444;
        }
    </style>
</head>
<body class="text-gray-800 min-h-screen">
    <!-- 合并的顶部组件 -->
    <div id="top-header" class="glass fixed top-0 left-0 right-0 z-50 px-4 py-3">
        <!-- iOS状态栏 -->
        <div id="ios-status-bar" class="h-7 flex justify-between items-center px-4">
            <div id="time" class="text-xs font-semibold text-gray-800">9:41</div>
            <div id="status-icons" class="flex items-center space-x-1">
                <i class="fas fa-signal text-xs text-gray-800"></i>
                <i class="fas fa-wifi text-xs text-gray-800"></i>
                <i class="fas fa-battery-three-quarters text-xs text-gray-800"></i>
            </div>
        </div>
        
        <!-- 标题栏 -->
        <header id="top-nav" class=" py-2 flex justify-between items-center">
            <div id="page-title" class="flex items-center">
                <h1 class="text-lg font-bold text-gray-800">商品管理</h1>
            </div>
            <div id="header-actions" class="flex items-center space-x-3">
                <div id="employee-avatar" class="w-8 h-8 rounded-full overflow-hidden mr-2">
                    <img src="https://i.pinimg.com/736x/41/e0/39/41e0398984b0f1a0c79acfb0694bfcce.jpg" alt="员工头像" class="w-full h-full object-cover">
                </div>
                <button id="batch-mode-btn" class="p-2 rounded-full glass">
                    <i class="fas fa-tasks text-gray-800"></i>
                </button>
                <button id="notification-btn" class="relative p-2 rounded-full glass">
                    <i class="fas fa-bell text-gray-800"></i>
                    <span id="notification-badge" class="absolute -top-1 -right-1 w-4 h-4 bg-accent rounded-full flex items-center justify-center text-[10px] text-white font-bold">3</span>
                </button>
            </div>
        </header>
    </div>

    <!-- 主容器 -->
    <div id="app-container" class="pt-16 pb-16 min-h-screen">

        <!-- 主内容区 -->
        <main id="main-content" class="pt-8 px-4 pb-24 overflow-y-auto custom-scrollbar">
            <!-- 搜索栏 -->
            <section id="search-section" class="mb-4 mt-4">
                <div id="search-container" class="glass-card flex items-center p-2 rounded-full">
                    <i class="fas fa-search text-gray-500 mx-3"></i>
                    <input id="search-input" type="text" placeholder="搜索商品名称、SKU..." class="bg-transparent border-none flex-1 focus:outline-none text-sm">
                </div>
            </section>

            <!-- 筛选器 -->
            <section id="filter-section" class="mb-6">
                <div id="filter-scroll" class="overflow-x-auto whitespace-nowrap -mx-4 px-4" style="scrollbar-width: none; -ms-overflow-style: none;">
                    <div id="filter-container" class="inline-flex space-x-2">
                        <button id="filter-all" class="filter-chip active px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            全部
                        </button>
                        <button id="filter-fresh" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            新鲜
                        </button>
                        <button id="filter-expiring" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            临期
                        </button>
                        <button id="filter-expired" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            已过期
                        </button>
                        <button id="filter-fruits" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            水果类
                        </button>
                        <button id="filter-vegetables" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            蔬菜类
                        </button>
                        <button id="filter-meat" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            肉类
                        </button>
                        <button id="filter-seafood" class="filter-chip px-4 py-2 rounded-full text-xs border border-gray-200 bg-white">
                            海鲜类
                        </button>
                    </div>
                </div>
            </section>

            <!-- 批量操作按钮 (默认隐藏) -->
            <section id="batch-actions" class="mb-4 hidden">
                <div id="batch-actions-container" class="flex space-x-2">
                    <button id="batch-select-all" class="text-xs bg-gray-100 text-gray-700 px-4 py-2 rounded-full">
                        全选
                    </button>
                    <button id="batch-status-change" class="text-xs bg-primary text-white px-4 py-2 rounded-full">
                        修改状态
                    </button>
                    <button id="batch-remove" class="text-xs bg-danger text-white px-4 py-2 rounded-full">
                        批量下架
                    </button>
                    <button id="batch-cancel" class="text-xs bg-gray-200 text-gray-700 px-4 py-2 rounded-full">
                        取消
                    </button>
                </div>
            </section>

            <!-- 商品列表 -->
            <section id="products-section">
                <div id="products-count" class="text-sm text-gray-600 mb-3">
                    共 <span id="count-number" class="font-semibold">24</span> 件商品
                </div>
                
                <div id="products-container" class="space-y-4">
                    <!-- 商品卡片1 - 新鲜 -->
                    <div id="product-1" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=400&h=400&fit=crop&crop=center" alt="红富士苹果" data-category="水果">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-1" class="text-sm font-semibold text-gray-800">红富士苹果</h3>
                                    <span id="product-status-1" class="status-fresh text-xs px-2 py-0.5 rounded-full">新鲜</span>
                                </div>
                                <p id="product-sku-1" class="text-xs text-gray-500">SKU: FRT-APL-001</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-1" class="text-sm font-medium text-gray-800">¥12.8/kg</p>
                                    <p id="product-location-1" class="text-xs text-gray-500">A区-3架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-1" class="text-xs text-gray-500">入库: 2023-06-10</p>
                                    <button id="product-detail-1" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-1" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 商品卡片2 - 临期 -->
                    <div id="product-2" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400&h=400&fit=crop&crop=center" alt="进口香蕉" data-category="水果">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-2" class="text-sm font-semibold text-gray-800">进口香蕉</h3>
                                    <span id="product-status-2" class="status-expiring text-xs px-2 py-0.5 rounded-full">临期</span>
                                </div>
                                <p id="product-sku-2" class="text-xs text-gray-500">SKU: FRT-BNN-002</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-2" class="text-sm font-medium text-gray-800">¥8.5/kg</p>
                                    <p id="product-location-2" class="text-xs text-gray-500">A区-2架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-2" class="text-xs text-gray-500">入库: 2023-06-05</p>
                                    <button id="product-detail-2" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-2" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 商品卡片3 - 已过期 -->
                    <div id="product-3" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1464965911861-746a04b4bca6?w=400&h=400&fit=crop&crop=center" alt="丹东草莓" data-category="水果">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-3" class="text-sm font-semibold text-gray-800">丹东草莓</h3>
                                    <span id="product-status-3" class="status-expired text-xs px-2 py-0.5 rounded-full">已过期</span>
                                </div>
                                <p id="product-sku-3" class="text-xs text-gray-500">SKU: FRT-STB-003</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-3" class="text-sm font-medium text-gray-800">¥25.8/盒</p>
                                    <p id="product-location-3" class="text-xs text-gray-500">A区-1架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-3" class="text-xs text-gray-500">入库: 2023-06-02</p>
                                    <button id="product-detail-3" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-3" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 商品卡片4 - 新鲜 -->
                    <div id="product-4" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1459411621453-7b03977f4bfc?w=400&h=400&fit=crop&crop=center" alt="有机西兰花" data-category="蔬菜">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-4" class="text-sm font-semibold text-gray-800">有机西兰花</h3>
                                    <span id="product-status-4" class="status-fresh text-xs px-2 py-0.5 rounded-full">新鲜</span>
                                </div>
                                <p id="product-sku-4" class="text-xs text-gray-500">SKU: VEG-BRC-001</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-4" class="text-sm font-medium text-gray-800">¥9.9/份</p>
                                    <p id="product-location-4" class="text-xs text-gray-500">B区-5架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-4" class="text-xs text-gray-500">入库: 2023-06-09</p>
                                    <button id="product-detail-4" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-4" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 商品卡片5 - 临期 -->
                    <div id="product-5" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=400&fit=crop&crop=center" alt="澳洲牛排" data-category="肉类">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-5" class="text-sm font-semibold text-gray-800">澳洲牛排</h3>
                                    <span id="product-status-5" class="status-expiring text-xs px-2 py-0.5 rounded-full">临期</span>
                                </div>
                                <p id="product-sku-5" class="text-xs text-gray-500">SKU: MT-BEF-002</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-5" class="text-sm font-medium text-gray-800">¥68.0/份</p>
                                    <p id="product-location-5" class="text-xs text-gray-500">C区-2架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-5" class="text-xs text-gray-500">入库: 2023-06-06</p>
                                    <button id="product-detail-5" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-5" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 商品卡片6 - 新鲜 -->
                    <div id="product-6" class="product-card glass-card p-4 rounded-2xl">
                        <div class="flex items-center">
                            <div class="product-image w-16 h-16 rounded-xl overflow-hidden mr-3 flex-shrink-0">
                                <img src="https://i.pinimg.com/1200x/5c/78/a6/5c78a64c12ec22fd06fbb93ad5cbd83f.jpg" alt="挪威三文鱼" data-category="海鲜">
                            </div>
                            <div class="product-info flex-1">
                                <div class="flex justify-between items-start">
                                    <h3 id="product-name-6" class="text-sm font-semibold text-gray-800">挪威三文鱼</h3>
                                    <span id="product-status-6" class="status-fresh text-xs px-2 py-0.5 rounded-full">新鲜</span>
                                </div>
                                <p id="product-sku-6" class="text-xs text-gray-500">SKU: SF-SLM-001</p>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-price-6" class="text-sm font-medium text-gray-800">¥88.0/份</p>
                                    <p id="product-location-6" class="text-xs text-gray-500">D区-1架</p>
                                </div>
                                <div class="flex justify-between items-center mt-1">
                                    <p id="product-entry-6" class="text-xs text-gray-500">入库: 2023-06-10</p>
                                    <button id="product-detail-6" class="text-xs text-primary">查看详情</button>
                                </div>
                            </div>
                            <div id="product-checkbox-6" class="product-checkbox ml-2 hidden">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-300"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部导航栏 -->
        <nav id="bottom-nav" class="fixed bottom-4 left-4 right-4 z-40">
            <div class="glass rounded-full shadow-glass px-0.5 py-0.5 flex justify-center items-center max-w-[280px] mx-auto space-x-1">
                <a id="nav-dashboard" href="P-EMP_DASHBOARD.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-home text-gray-800 text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-products" href="P-EMP_PRODUCT_LIST.html" class="flex items-center justify-center p-3">
                    <div class="w-12 h-12 rounded-xl bg-primary/30 flex items-center justify-center">
                        <i class="fas fa-box text-primary text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-map" href="P-EMP_MAP.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-map-marker-alt text-gray-800 text-lg"></i>
                    </div>
                </a>
                
                <a id="nav-reports" href="P-EMP_REPORT.html" class="flex items-center justify-center p-3">
                    <div class="w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-chart-bar text-gray-800 text-lg"></i>
                    </div>
                </a>
            </div>
        </nav>
    </div>

    <!-- 状态修改弹窗 (默认隐藏) -->
    <div id="status-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div id="modal-overlay" class="absolute inset-0 bg-black bg-opacity-50"></div>
        <div id="modal-content" class="glass-card p-6 rounded-3xl w-[90%] max-w-sm relative z-10">
            <h3 id="modal-title" class="text-lg font-bold text-gray-800 mb-4">修改商品状态</h3>
            <div id="status-options" class="space-y-3 mb-6">
                <button id="status-option-fresh" class="w-full text-left px-4 py-3 rounded-xl flex items-center status-fresh">
                    <div class="w-5 h-5 rounded-full border-2 border-primary mr-3 flex items-center justify-center">
                        <div class="w-3 h-3 rounded-full bg-primary"></div>
                    </div>
                    <span>新鲜</span>
                </button>
                <button id="status-option-expiring" class="w-full text-left px-4 py-3 rounded-xl flex items-center">
                    <div class="w-5 h-5 rounded-full border-2 border-gray-300 mr-3"></div>
                    <span>临期</span>
                </button>
                <button id="status-option-expired" class="w-full text-left px-4 py-3 rounded-xl flex items-center">
                    <div class="w-5 h-5 rounded-full border-2 border-gray-300 mr-3"></div>
                    <span>已过期</span>
                </button>
                <button id="status-option-removed" class="w-full text-left px-4 py-3 rounded-xl flex items-center">
                    <div class="w-5 h-5 rounded-full border-2 border-gray-300 mr-3"></div>
                    <span>下架</span>
                </button>
            </div>
            <div id="modal-actions" class="flex space-x-3">
                <button id="modal-cancel" class="flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-medium">
                    取消
                </button>
                <button id="modal-confirm" class="flex-1 py-3 rounded-xl bg-primary text-white font-medium">
                    确认
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取URL参数
            function getUrlParams() {
                const params = {};
                const queryString = window.location.search.substring(1);
                const urlParams = new URLSearchParams(queryString);
                
                for(const [key, value] of urlParams.entries()) {
                    params[key] = value;
                }
                return params;
            }
            
            // 获取URL参数
            const params = getUrlParams();
            
            // 如果有状态参数，应用筛选
            if(params.status) {
                // 移除所有筛选器的active类
                document.querySelectorAll('.filter-chip').forEach(chip => {
                    chip.classList.remove('active');
                });
                
                // 根据状态参数设置对应筛选器为active
                if(params.status === 'fresh') {
                    document.querySelector('#filter-fresh').classList.add('active');
                    // 这里可以添加筛选商品列表的逻辑
                } else if(params.status === 'expiring') {
                    document.querySelector('#filter-expiring').classList.add('active');
                    // 这里可以添加筛选商品列表的逻辑
                } else if(params.status === 'expired') {
                    document.querySelector('#filter-expired').classList.add('active');
                    // 这里可以添加筛选商品列表的逻辑
                }
            }
            
            // 筛选器点击事件
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    // 移除所有筛选器的active类
                    document.querySelectorAll('.filter-chip').forEach(c => {
                        c.classList.remove('active');
                    });
                    
                    // 为当前点击的筛选器添加active类
                    this.classList.add('active');
                    
                    // 这里可以添加筛选商品列表的逻辑
                    console.log('筛选条件:', this.textContent.trim());
                });
            });
            
            // 搜索框输入事件
            document.querySelector('#search-input').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                console.log('搜索关键词:', searchTerm);
                
                // 这里可以添加搜索商品的逻辑
                // 简单示例：根据商品名称筛选
                document.querySelectorAll('.product-card').forEach(card => {
                    const productName = card.querySelector('[id^="product-name-"]').textContent.toLowerCase();
                    const productSku = card.querySelector('[id^="product-sku-"]').textContent.toLowerCase();
                    
                    if(productName.includes(searchTerm) || productSku.includes(searchTerm)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
            
            // 批量操作模式切换
            document.querySelector('#batch-mode-btn').addEventListener('click', function() {
                const batchActions = document.querySelector('#batch-actions');
                const productCheckboxes = document.querySelectorAll('.product-checkbox');
                const productsContainer = document.querySelector('#products-container');
                
                if(batchActions.classList.contains('hidden')) {
                    // 进入批量操作模式
                    batchActions.classList.remove('hidden');
                    productCheckboxes.forEach(checkbox => {
                        checkbox.classList.remove('hidden');
                    });
                    productsContainer.classList.add('batch-mode');
                } else {
                    // 退出批量操作模式
                    batchActions.classList.add('hidden');
                    productCheckboxes.forEach(checkbox => {
                        checkbox.classList.add('hidden');
                    });
                    productsContainer.classList.remove('batch-mode');
                    
                    // 清除所有选中状态
                    document.querySelectorAll('.product-card').forEach(card => {
                        card.classList.remove('selected');
                        const checkbox = card.querySelector('.product-checkbox div');
                        checkbox.innerHTML = '';
                        checkbox.classList.remove('bg-primary');
                        checkbox.classList.add('border-gray-300');
                    });
                }
            });
            
            // 批量操作取消按钮
            document.querySelector('#batch-cancel').addEventListener('click', function() {
                // 模拟点击批量操作模式按钮，退出批量操作模式
                document.querySelector('#batch-mode-btn').click();
            });
            
            // 全选按钮
            document.querySelector('#batch-select-all').addEventListener('click', function() {
                const allSelected = document.querySelectorAll('.product-card.selected').length === document.querySelectorAll('.product-card').length;
                
                document.querySelectorAll('.product-card').forEach(card => {
                    const checkbox = card.querySelector('.product-checkbox div');
                    
                    if(allSelected) {
                        // 如果全部已选中，则取消全选
                        card.classList.remove('selected');
                        checkbox.innerHTML = '';
                        checkbox.classList.remove('bg-primary');
                        checkbox.classList.add('border-gray-300');
                    } else {
                        // 否则全选
                        card.classList.add('selected');
                        checkbox.innerHTML = '<i class="fas fa-check text-white text-xs"></i>';
                        checkbox.classList.add('bg-primary');
                        checkbox.classList.remove('border-gray-300');
                    }
                });
            });
            
            // 商品卡片点击事件（批量操作模式下）
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // 如果不是批量操作模式，或者点击的是"查看详情"按钮，则不处理
                    if(!document.querySelector('#products-container').classList.contains('batch-mode') || 
                       e.target.closest('[id^="product-detail-"]')) {
                        return;
                    }
                    
                    const checkbox = this.querySelector('.product-checkbox div');
                    
                    if(this.classList.contains('selected')) {
                        // 取消选中
                        this.classList.remove('selected');
                        checkbox.innerHTML = '';
                        checkbox.classList.remove('bg-primary');
                        checkbox.classList.add('border-gray-300');
                    } else {
                        // 选中
                        this.classList.add('selected');
                        checkbox.innerHTML = '<i class="fas fa-check text-white text-xs"></i>';
                        checkbox.classList.add('bg-primary');
                        checkbox.classList.remove('border-gray-300');
                    }
                });
            });
            
            // 批量修改状态按钮
            document.querySelector('#batch-status-change').addEventListener('click', function() {
                const selectedCount = document.querySelectorAll('.product-card.selected').length;
                
                if(selectedCount === 0) {
                    alert('请先选择商品');
                    return;
                }
                
                // 显示状态修改弹窗
                document.querySelector('#status-modal').classList.remove('hidden');
            });
            
            // 批量下架按钮
            document.querySelector('#batch-remove').addEventListener('click', function() {
                const selectedCount = document.querySelectorAll('.product-card.selected').length;
                
                if(selectedCount === 0) {
                    alert('请先选择商品');
                    return;
                }
                
                if(confirm(`确定要下架选中的 ${selectedCount} 件商品吗？`)) {
                    // 这里可以添加批量下架的逻辑
                    console.log('批量下架商品');
                    
                    // 模拟下架成功
                    alert('下架成功');
                    
                    // 退出批量操作模式
                    document.querySelector('#batch-mode-btn').click();
                }
            });
            
            // 状态选项点击事件
            document.querySelectorAll('#status-options button').forEach(option => {
                option.addEventListener('click', function() {
                    // 移除所有选项的选中状态
                    document.querySelectorAll('#status-options button').forEach(opt => {
                        const radio = opt.querySelector('div');
                        radio.innerHTML = '';
                        radio.classList.remove('border-primary');
                        radio.classList.add('border-gray-300');
                    });
                    
                    // 设置当前选项为选中状态
                    const radio = this.querySelector('div');
                    radio.innerHTML = '<div class="w-3 h-3 rounded-full bg-primary"></div>';
                    radio.classList.add('border-primary');
                    radio.classList.remove('border-gray-300');
                });
            });
            
            // 弹窗取消按钮
            document.querySelector('#modal-cancel').addEventListener('click', function() {
                document.querySelector('#status-modal').classList.add('hidden');
            });
            
            // 弹窗确认按钮
            document.querySelector('#modal-confirm').addEventListener('click', function() {
                // 获取选中的状态选项
                let selectedStatus = '';
                document.querySelectorAll('#status-options button').forEach(option => {
                    if(option.querySelector('div').classList.contains('border-primary')) {
                        selectedStatus = option.textContent.trim();
                    }
                });
                
                if(!selectedStatus) {
                    alert('请选择一个状态');
                    return;
                }
                
                // 获取选中的商品
                const selectedProducts = document.querySelectorAll('.product-card.selected');
                
                // 这里可以添加批量修改状态的逻辑
                console.log('批量修改状态为:', selectedStatus);
                
                // 模拟修改成功
                alert(`已将 ${selectedProducts.length} 件商品状态修改为 ${selectedStatus}`);
                
                // 隐藏弹窗
                document.querySelector('#status-modal').classList.add('hidden');
                
                // 退出批量操作模式
                document.querySelector('#batch-mode-btn').click();
            });
            
            // 弹窗背景点击关闭
            document.querySelector('#modal-overlay').addEventListener('click', function() {
                document.querySelector('#status-modal').classList.add('hidden');
            });
            
            // 商品详情按钮点击事件
            document.querySelectorAll('[id^="product-detail-"]').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation(); // 阻止事件冒泡，避免触发商品卡片的点击事件
                    
                    // 获取商品ID
                    const productId = this.id.split('-')[2];
                    
                    // 跳转到商品详情页
                    window.location.href = `P-EMP_PRODUCT_DETAIL.html?productId=${productId}`;
                });
            });
            
            // 底部导航栏点击事件
            document.querySelector('#nav-dashboard').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-EMP_DASHBOARD.html';
            });
            
            document.querySelector('#nav-products').addEventListener('click', function(e) {
                e.preventDefault();
                // 已在商品列表页，无需操作
            });
            
            document.querySelector('#nav-map').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-EMP_MAP.html';
            });
            
            document.querySelector('#nav-reports').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-EMP_REPORT.html';
            });
        });
    </script>
</body>
</html>